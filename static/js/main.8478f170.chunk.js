(this["webpackJsonpsticker-scraper"]=this["webpackJsonpsticker-scraper"]||[]).push([[0],{1278:function(e,t,r){"use strict";r.r(t);var n=r(18),s=r.n(n),i=r(25),a=(r(78),r(79),r(1)),c=r(13),o=r(7),u=r(10),d=r(23),h=r(5),l=r(28),b=r.n(l),j=r(46),f=r.n(j),p=r(4),v=["className","disablePadding"],O=function(e){var t=e.className,r=e.disablePadding,n=Object(h.a)(e,v);return Object(p.jsx)("div",Object(u.a)({className:b()(f.a.root,Object(d.a)({},f.a.padding,!r),t)},n))},x=r(6),m=document.documentElement,g=function(){var e=Object(o.n)();return Object(a.useEffect)((function(){for(var t=e.palette,r=0,n=Object.entries(t);r<n.length;r++){var s=Object(x.a)(n[r],2),i=s[0],a=s[1];m.style.setProperty("--palette-"+i,a)}}),[e]),null},k=r(59),w=r.n(k),y=r(60),S=r.n(y),I=["className"],C=["component","children"],_=function(e){var t=e.className,r=Object(h.a)(e,I);return Object(p.jsx)("div",Object(u.a)({className:b()(t,S.a.thumb)},r))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{height:t?"100%":e,width:t?e:"100%",position:"relative"}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{position:"absolute",top:r?0:t,left:r?t:0,height:r?"100%":e,width:r?e:"100%"}},N=function(e,t){var r=e.component,n=void 0===r?"div":r,s=e.children,i=Object(h.a)(e,C),c=Object(a.useCallback)((function(e){e&&t&&"object"===typeof t?t.current=e.view:e&&"function"===typeof t?null===t||void 0===t||t(e.view):"function"===typeof t&&(null===t||void 0===t||t(null))}),[]),o=Object(a.useCallback)((function(e){return Object(p.jsx)(n,Object(u.a)({},e))}),[n]);return Object(p.jsx)(w.a,Object(u.a)(Object(u.a)({ref:c,renderView:o,renderThumbHorizontal:_,renderThumbVertical:_},i),{},{children:s}))},L=Object(a.forwardRef)(N),R=r(30),E=r(15);function P(){var e=Object(E.g)(),t=Object(a.useCallback)((function(){e.length>1?e.goBack():e.push("/")}),[e]);return Object(p.jsx)(o.d,{md:0,children:Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:Object(p.jsx)(R.a,{}),onClick:t})})}var z=r(37),M=r.n(z),U=r(9),D=r(16),F=r(17),H=r(8),W=r.n(H),Z=r(14),B=r(11),V=r(62);function q(e){return J.apply(this,arguments)}function J(){return(J=Object(U.a)(W.a.mark((function e(t){var r,n,s,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return r=e.sent,n=new Uint8Array(r),s=V.a.inflate(n),e.next=7,new Blob([s]).text();case 7:return i=e.sent,e.abrupt("return",JSON.parse(i));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return new Response(new Blob([e],{type:"application/json"})).text()}function Y(e){return new Response(e).text()}function G(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e,r){t.onloadend=function(){e(t.result)},t.onerror=function(e){r(e)}}))}var K=r(33),X=function(){function e(){Object(D.a)(this,e),this.handlers=[]}return Object(F.a)(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.handlers.push(t),this}},{key:"build",value:function(){var e=this;return function(t,r){var n,s=null!==(n=e.handlers.filter((function(e){return Object(x.a)(e,1)[0]===t._})))&&void 0!==n?n:[];return s.length?K.Composer.compose(s.map((function(e){return Object(x.a)(e,2)[1]})))(t,r):r()}}}]),e}();function $(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var ee=r(38),te=r(63),re={useTestDc:false,readOnly:!1,instanceName:"tdlib",apiId:parseInt("6544363"),apiHash:"86ef20b7ba5e5464dc7079e760e1499c",jsLogVerbosityLevel:"info",logVerbosityLevel:1,useDatabase:!0,useFileDatabase:!0,useChatInfoDatabase:!0,useMessageDatabase:!0,useSecretChats:!1},ne=function(){function e(){Object(D.a)(this,e),this.current=void 0}return Object(F.a)(e,[{key:"makeAsync",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.current){e.next=3;break}return e.next=3,this.current.api.destroy();case 3:return t=new ee.Airgram(re),this.current=t,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),se=function(){function e(t){var r=this;Object(D.a)(this,e),this.rootStore=t,this.state=void 0,this.firstLaunch=!0,this.user=void 0,this.handlers=(new X).add(Z.UPDATE.updateAuthorizationState,(function(e){var t,n=e.update.authorizationState;if(r.firstLaunch&&n._===Z.AUTHORIZATION_STATE.authorizationStateWaitPhoneNumber&&(null===(t=r.state)||void 0===t?void 0:t._)===Z.AUTHORIZATION_STATE.authorizationStateWaitEncryptionKey)return r.firstLaunch=!1,void r.switchToQr();r.setState(n)})).build(),Object(B.d)(this,{user:B.f.ref,handlers:!1})}return Object(F.a)(e,[{key:"setState",value:function(e){this.state=e}},{key:"switchToQr",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=this.state)||void 0===t?void 0:t._)!==Z.AUTHORIZATION_STATE.authorizationStateWaitOtherDeviceConfirmation){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.rootStore.Airgram.api.requestQrCodeAuthentication();case 4:if("error"!==(r=e.sent).response._){e.next=7;break}return e.abrupt("return",r);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"switchToPhoneNumber",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=this.state)||void 0===t?void 0:t._)!==Z.AUTHORIZATION_STATE.authorizationStateWaitPhoneNumber){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.reset();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.firstLaunch=!1,e.next=3,this.rootStore.resetAirgram();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logOut",value:function(){var e=Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.Airgram.api.logOut();case 2:return this.firstLaunch=!0,e.next=5,this.rootStore.resetAirgram();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendPhoneNumber",value:function(e){return this.rootStore.Airgram.api.setAuthenticationPhoneNumber({phoneNumber:e})}},{key:"sendCode",value:function(e){return this.rootStore.Airgram.api.checkAuthenticationCode({code:e})}},{key:"sendPassword",value:function(e){return this.rootStore.Airgram.api.checkAuthenticationPassword({password:e})}},{key:"getMe",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.user){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.rootStore.Airgram.api.getMe();case 4:if("error"!==(t=e.sent).response._){e.next=7;break}throw t.response;case 7:this.user=t.response;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ie=function(){function e(t){var r=this;Object(D.a)(this,e),this.rootStore=t,this.chats=new Map,this.handlers=(new X).add(Z.UPDATE.updateNewChat,(function(e,t){return r.setChat(e.update.chat.id,(function(t){t.info=e.update.chat})),t()})).add(Z.UPDATE.updateChatPosition,(function(e,t){return r.setChat(e.update.chatId,(function(t){t.position=e.update.position})),t()})).add(Z.UPDATE.updateChatLastMessage,(function(e,t){r.setChat(e.update.chatId,(function(t){t.lastMessage=e.update.lastMessage}));var n=e.update.positions.find((function(e){return"chatListMain"===e.list._}));return n&&r.setChat(e.update.chatId,(function(e){e.position=n})),t()})).build(),Object(B.d)(this,{chats:B.f.shallow,handlers:!1})}return Object(F.a)(e,[{key:"setChat",value:function(e,t){var r,n=this.chats.get(e);n||(n={}),n=null!==(r=t(n))&&void 0!==r?r:n,this.chats.set(e,n)}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.Airgram.api.loadChats({chatList:{_:"chatListMain"},limit:10});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"chatsList",get:function(){return Array.from(this.chats.values()).sort((function(e,t){var r,n,s,i;return BigInt(null!==(r=null===(n=e.position)||void 0===n?void 0:n.order)&&void 0!==r?r:0)<BigInt(null!==(s=null===(i=t.position)||void 0===i?void 0:i.order)&&void 0!==s?s:0)?0:-1})).sort((function(e,t){var r,n,s=null===(r=e.position)||void 0===r?void 0:r.isPinned;return s===(null===(n=t.position)||void 0===n?void 0:n.isPinned)?0:s?-1:1}))}}]),e}(),ae=function(){function e(t){var r=this;Object(D.a)(this,e),this.rootStore=t,this.state=Z.CONNECTION_STATE.connectionStateWaitingForNetwork,this.middleware=function(){return function(){var e=Object(U.a)(W.a.mark((function e(t,n){var s,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._===Z.UPDATE.updateConnectionState&&"update"in t&&(s=t.update,i=s.state._,r.setState(i)),e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},Object(B.d)(this,{middleware:!1})}return Object(F.a)(e,[{key:"setState",value:function(e){this.state=e}}]),e}(),ce="theme",oe="light";window.matchMedia("(prefers-color-scheme: dark)").matches&&(oe="dark");var ue=localStorage.getItem(ce);ue&&(oe=ue);var de=function(){function e(){Object(D.a)(this,e),this.currentTheme=oe,Object(B.d)(this)}return Object(F.a)(e,[{key:"setTheme",value:function(e){this.currentTheme=e,localStorage.setItem(ce,e)}},{key:"toggleTheme",value:function(){var e="dark"===this.currentTheme?"light":"dark";this.setTheme(e)}}]),e}(),he=new ne,le=function(){function e(){var t=this;Object(D.a)(this,e),this.events=new te.EventEmitter,this.emit=function(r,n){var s;console.log(r);var i=null!==(s=t.events.listeners(e.eventName))&&void 0!==s?s:[];return ee.Composer.compose(i)(r,n)},this.Theme=new de,this.Airgram=void 0,this.Authorization=new se(this),this.Connection=new ae(this),this.Chats=new ie(this),this.resetAirgram(),Object(B.d)(this,{events:!1,Airgram:!1})}return Object(F.a)(e,[{key:"resetAirgram",value:function(){var e=Object(U.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.makeAsync();case 2:this.Airgram=e.sent,this.Airgram.use(this.Authorization.handlers,this.Connection,this.Chats.handlers,this.emit);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();le.eventName="action";var be=new Map,je=function(){function e(t,r,n,s){var i=this;Object(D.a)(this,e),this.rootStore=t,this.isLoading=!1,this.format=void 0,this.file=void 0,this.content=void 0,this.params=void 0,this.handlers=(new X).add(Z.UPDATE.updateFile,(function(e,t){var r;return e.update.file.id===(null===(r=i.file)||void 0===r?void 0:r.id)&&i.load(),t()})).build(),Object(B.d)(this,{content:B.f.ref,handlers:!1}),this.file=r,this.format=n,this.params=s,this.load(),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setContent",value:function(e){this.content=e}},{key:"dispose",value:function(){this.rootStore.events.removeListener(le.eventName,this.handlers)}},{key:"setFile",value:function(e,t,r){return this.file=e,this.format!==t&&(this.content=void 0,this.format=t),this.params=r,this.load()}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r,n,s,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.file&&!this.isLoading){e.next=2;break}return e.abrupt("return");case 2:if(!this.content){e.next=4;break}return e.abrupt("return",this.content);case 4:if(e.prev=4,this.setLoading(!0),t=this.file.id,!(r=be.get(t))){e.next=11;break}return this.setContent(r),e.abrupt("return",r);case 11:return e.next=13,this.rootStore.Airgram.api.downloadFile(Object(u.a)({fileId:t,priority:1},this.params));case 13:if("error"!==e.sent.response._){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,this.rootStore.Airgram.api.readFilePart({fileId:t});case 18:if("error"!==(n=e.sent).response._){e.next=21;break}return e.abrupt("return");case 21:if(s=n.response.data,i=null,"blob"===this.format&&(i=s),"base64"!==this.format){e.next=28;break}return e.next=27,G(s);case 27:i=e.sent;case 28:if("text"!==this.format){e.next=32;break}return e.next=31,Y(s);case 31:i=e.sent;case 32:if("json"!==this.format){e.next=36;break}return e.next=35,Q(s);case 35:i=e.sent;case 36:if("lotty"!==this.format){e.next=40;break}return e.next=39,q(s);case 39:i=e.sent;case 40:return be.set(t,i),this.setContent(i),e.abrupt("return",i);case 43:return e.prev=43,this.setLoading(!1),e.finish(43);case 46:case"end":return e.stop()}}),e,this,[[4,,43,46]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function fe(e,t,r){var n=Object(a.useState)((function(){return new je(Le,e,t,r)})),s=Object(x.a)(n,1)[0];return Object(a.useEffect)((function(){return s.load(),function(){s.dispose()}}),[]),Object(a.useEffect)((function(){s.setFile(e,t,r)}),[e,t,r,s]),s.content}var pe=["file","fallback"],ve=Object(c.a)((function(e){var t=e.file,r=e.fallback,n=Object(h.a)(e,pe),s=fe(t,"base64");return s?Object(p.jsx)("img",Object(u.a)({alt:"",src:s},n)):null!==r&&void 0!==r?r:null})),Oe=r(64),xe=r.n(Oe),me=r(65),ge=r.n(me),ke=["file","fallback","height","width"],we=Object(c.a)((function(e){var t=e.file,r=e.fallback,n=e.height,s=e.width,i=Object(h.a)(e,ke),a=fe(t,"lotty");return a?Object(p.jsx)(ge.a,{intervalCheck:!0,scrollCheck:!0,children:function(e){var t=e.isVisible;return Object(p.jsx)(xe.a,Object(u.a)({loop:t,renderer:"svg",animationData:a,height:n,width:s,style:{height:n,width:s}},i))}}):null!==r&&void 0!==r?r:null})),ye=["sticker","height","width"],Se=100,Ie=320,Ce=Object(p.jsx)(o.j,{className:M.a.spinner,scale:4}),_e=Object(c.a)((function(e){var t=e.sticker,r=e.height,n=void 0===r?Ie:r,s=e.width,i=void 0===s?Ie:s,a=Object(h.a)(e,ye),c=void 0;return c=t.isAnimated?Object(p.jsx)(we,Object(u.a)({className:M.a.sticker,file:t.sticker,fallback:Ce,height:n,width:i},a)):Object(p.jsx)(ve,Object(u.a)({className:M.a.sticker,file:t.sticker,fallback:Ce,height:n,width:i},a)),Object(p.jsx)("div",{className:M.a.root,style:{height:n,width:i},children:c})})),Ae=["thumbnail","height","width"],Te=function(e){var t=e.thumbnail,r=e.height,n=e.width,s=Object(h.a)(e,Ae),i=null!==t&&void 0!==t?t:{},a=i.format,c=i.file,o=i.height,d=i.width,l=null!==r&&void 0!==r?r:o,b=null!==n&&void 0!==n?n:d;switch(a._){case"thumbnailFormatJpeg":case"thumbnailFormatPng":case"thumbnailFormatWebp":case"thumbnailFormatGif":return Object(p.jsx)(ve,Object(u.a)({file:c,height:l,width:b},s));case"thumbnailFormatTgs":return Object(p.jsx)(we,Object(u.a)({file:c,height:l,width:b},s));default:return null}},Ne=function(e){var t,r=e.set,n=e.height,s=void 0===n?Se:n,i=e.width,a=void 0===i?Se:i;return null!==r&&void 0!==r&&r.thumbnail?Object(p.jsx)(Te,{thumbnail:r.thumbnail,height:s,width:a}):null!==r&&void 0!==r&&null!==(t=r.stickers)&&void 0!==t&&t[0]?Object(p.jsx)(_e,{sticker:null===r||void 0===r?void 0:r.stickers[0],height:s,width:a}):null},Le=new le,Re=Object(a.createContext)(Le),Ee=function(e){var t=e.children;return Object(p.jsx)(Re.Provider,{value:Le,children:t})},Pe=function(e){return Object(p.jsx)(o.d.Container,Object(u.a)({wrap:"nowrap",height:"".concat(64,"px"),alignItems:"center"},e))},ze=r(66),Me=r.n(ze),Ue=["className"],De=function(e){var t=e.className,r=Object(h.a)(e,Ue);return Object(p.jsx)(o.l,Object(u.a)({className:b()(Me.a.card,t)},r))},Fe=r(31),He=Object(c.a)((function(){var e=Object(a.useContext)(Re).Authorization,t=Object(Fe.b)(),r=t.handleSubmit,n=t.setError,s=t.control,i=e.state,c=Object(Fe.a)({defaultValue:"",name:"code",rules:{required:!0},control:s}),u=c.field,d=u.value,h=u.onChange,l=c.fieldState.error,b=Object(a.useCallback)(function(){var t=Object(U.a)(W.a.mark((function t(r){var s,i;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.code,t.prev=1,t.next=4,e.sendCode(s);case 4:if("error"!==(i=t.sent).response._){t.next=7;break}throw i.response._;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n("code",{message:t.t0});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),[e,n]),j=Object(a.useCallback)((function(e){var t=e.target.value;h(t),5===t.length&&r(b)(e)}),[r,h,b]);return Object(p.jsx)(O,{children:Object(p.jsx)("form",{onSubmit:r(b),children:Object(p.jsxs)(o.d.Container,{direction:"column",alignContent:"center",alignItems:"center",children:[Object(p.jsx)(o.k,{h3:!0,children:i.codeInfo.phoneNumber}),Object(p.jsx)(o.e,{autoFocus:!0,label:"Code",type:l?"error":void 0,value:d,onChange:j}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{htmlType:"submit",type:"success",children:"Next"}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{type:"success",ghost:!0,onClick:function(){return e.reset()},children:"Reset"})]})})})})),We=Object(c.a)((function(){var e=Object(a.useContext)(Re).Authorization,t=Object(a.useState)(!1),r=Object(x.a)(t,2),n=r[0],s=r[1],i=Object(Fe.b)(),c=i.formState.errors,d=i.register,h=i.handleSubmit,l=i.setError,b=e.state,j=Object(a.useCallback)(function(){var t=Object(U.a)(W.a.mark((function t(r){var i,a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.password,!n){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s(!0),t.next=7,e.sendPassword(i);case 7:if("error"!==(a=t.sent).response._){t.next=10;break}throw a.response._;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),l("password",{message:t.t0});case 15:return t.prev=15,s(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,12,15,18]])})));return function(e){return t.apply(this,arguments)}}(),[e,n,l]);return Object(p.jsx)(O,{children:Object(p.jsx)("form",{onSubmit:h(j),children:Object(p.jsxs)(o.d.Container,{direction:"column",alignContent:"center",alignItems:"center",children:[Object(p.jsx)(o.k,{h3:!0,children:"Enter Your Password"}),Object(p.jsx)(o.e.Password,Object(u.a)({autoFocus:!0,disabled:n,placeholder:b.passwordHint,type:c.password?"error":void 0},d("password",{required:!0}))),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{disabled:n,htmlType:"submit",type:"success",children:"Next"}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{type:"success",ghost:!0,onClick:function(){return e.reset()},children:"Reset"})]})})})})),Ze=function(){var e=Object(a.useContext)(Re).Authorization,t=Object(a.useState)(!1),r=Object(x.a)(t,2),n=r[0],s=r[1],i=Object(Fe.b)(),c=i.formState.errors,d=i.register,h=i.handleSubmit,l=i.setError,b=Object(a.useCallback)(function(){var t=Object(U.a)(W.a.mark((function t(r){var i,a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.phoneNumber,!n){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s(!0),t.next=7,e.sendPhoneNumber(i);case 7:if("error"!==(a=t.sent).response._){t.next=10;break}throw a.response._;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),l("phoneNumber",{message:t.t0});case 15:return t.prev=15,s(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,12,15,18]])})));return function(e){return t.apply(this,arguments)}}(),[e,n,l]);return Object(p.jsx)(O,{children:Object(p.jsx)("form",{onSubmit:h(b),children:Object(p.jsxs)(o.d.Container,{direction:"column",alignContent:"center",alignItems:"center",children:[Object(p.jsx)(o.k,{h3:!0,children:"Log in to Telegram"}),Object(p.jsx)(o.k,{margin:0,children:"by phone number"}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.e,Object(u.a)({autoFocus:!0,disabled:n,type:c.phoneNumber?"error":void 0},d("phoneNumber",{required:!0}))),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{disabled:n,htmlType:"submit",type:"success",children:"Next"}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{ghost:!0,type:"success",onClick:function(){return e.switchToQr()},children:"Log in by qr code"})]})})})},Be=r(67),Ve=r.n(Be),qe=r(68),Je=r.n(qe),Qe=Object(c.a)((function(){var e=Object(a.useContext)(Re).Authorization,t=e.state;return Object(p.jsx)(O,{children:Object(p.jsxs)(o.d.Container,{direction:"column",alignContent:"center",alignItems:"center",children:[Object(p.jsx)(o.k,{h3:!0,children:"Log in to Telegram"}),Object(p.jsx)(o.k,{margin:0,children:"by qr code"}),Object(p.jsx)(o.i,{}),Object(p.jsx)("div",{className:Je.a.codeArea,children:Object(p.jsx)(O,{disablePadding:!0,children:t.link?Object(p.jsx)(Ve.a,{includeMargin:!0,renderAs:"svg",value:t.link,size:240}):Object(p.jsx)(o.j,{})})}),Object(p.jsx)(o.i,{}),Object(p.jsx)(o.a,{ghost:!0,type:"success",onClick:function(){return e.switchToPhoneNumber()},children:"Log in by phone number"})]})})})),Ye=Object(c.a)((function(){var e,t,r,n,s=Object(a.useContext)(Re).Authorization;return(null===(e=s.state)||void 0===e?void 0:e._)===Z.AUTHORIZATION_STATE.authorizationStateWaitPhoneNumber?Object(p.jsx)(Ze,{}):(null===(t=s.state)||void 0===t?void 0:t._)===Z.AUTHORIZATION_STATE.authorizationStateWaitCode?Object(p.jsx)(He,{}):(null===(r=s.state)||void 0===r?void 0:r._)===Z.AUTHORIZATION_STATE.authorizationStateWaitPassword?Object(p.jsx)(We,{}):(null===(n=s.state)||void 0===n?void 0:n._)===Z.AUTHORIZATION_STATE.authorizationStateWaitOtherDeviceConfirmation?Object(p.jsx)(Qe,{}):null})),Ge=[Z.AUTHORIZATION_STATE.authorizationStateWaitTdlibParameters,Z.AUTHORIZATION_STATE.authorizationStateWaitEncryptionKey],Ke=[Z.AUTHORIZATION_STATE.authorizationStateWaitPhoneNumber,Z.AUTHORIZATION_STATE.authorizationStateWaitCode,Z.AUTHORIZATION_STATE.authorizationStateWaitPassword,Z.AUTHORIZATION_STATE.authorizationStateWaitOtherDeviceConfirmation],Xe=Object(c.a)((function(e){var t=e.children,r=Object(a.useContext)(Re).Authorization;return!r.state||Ge.includes(r.state._)?Object(p.jsx)(O,{children:Object(p.jsx)(o.j,{scale:5})}):Ke.includes(r.state._)?Object(p.jsx)(Ye,{}):(console.log(r.state._),Object(p.jsx)(p.Fragment,{children:t}))})),$e=r(12),et=r(29),tt=r(24),rt=new Map,nt=function(){function e(t,r){var n=this;if(Object(D.a)(this,e),this.rootStore=t,this.chatId=r,this.isLoading=!1,this.chat=void 0,this.handlers=(new X).add(Z.UPDATE.updateNewChat,(function(e,t){return e.update.chat.id===n.chatId&&(n.chat=e.update.chat),t()})).build(),rt.has(r)){var s=rt.get(r);this.chat=s}Object(B.d)(this,{chat:B.f.ref,handlers:!1}),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setChat",value:function(e){this.chat=e}},{key:"dispose",value:function(){this.rootStore.events.removeListener(le.eventName,this.handlers)}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.chat){e.next=2;break}return e.abrupt("return",this.chat);case 2:return this.setLoading(!0),e.prev=3,e.next=6,this.rootStore.Airgram.api.getChat({chatId:this.chatId});case 6:if("error"!==(t=e.sent).response._){e.next=9;break}throw t.response;case 9:return this.setChat(t.response),rt.set(this.chatId,t.response),e.abrupt("return",this.chat);case 12:return e.prev=12,this.setLoading(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,,12,15]])})));return function(){return e.apply(this,arguments)}}()}]),e}();var st=new Map,it=function(){function e(t,r){var n=this;if(Object(D.a)(this,e),this.rootStore=t,this.chatId=r,this.isLoading=!1,this.chatStore=void 0,this.isRestored=!1,this.startMessage=0,this.canLoad=!0,this.messages=[],this.messageIds=new Map,this.stickerIds=new Map,this.processed=0,this.total=0,this.batch=0,this.handlers=(new X).add(Z.UPDATE.updateNewChat,(function(e,t){return e.update.chat.id===n.chatId&&n.load(),t()})).add(Z.UPDATE.updateNewMessage,(function(e,t){var r=e.update.message;return r.chatId!==n.chatId||n.messageIds.has(r.id)||(n.messageIds.set(r.id,!0),"messageSticker"!==r.content._||n.stickerIds.has(r.content.sticker.setId)||(n.addMessage(r),n.stickerIds.set(r.content.sticker.setId,!0)),n.save()),t()})).build(),this.chatStore=new nt(t,r),st.has(r)){var s=st.get(r);Object.assign(this,s),this.isRestored=!0}Object(B.d)(this,{messages:B.f.shallow,messageIds:B.f.shallow,stickerIds:B.f.shallow,dispose:!1,handlers:!1}),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setLoading",value:function(e){this.isLoading=e}},{key:"insertMessage",value:function(e){this.messages.unshift(e)}},{key:"addMessage",value:function(e){this.messages.push(e)}},{key:"setLoadingProgress",value:function(e,t,r){this.processed=e,this.total=t,this.batch=r}},{key:"dispose",value:function(){this.chatStore.dispose(),this.rootStore.events.removeListener(le.eventName,this.handlers)}},{key:"init",value:function(){if(!this.isRestored)return this.load()}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r,n,s,i,a,c,o,u=this;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canLoad&&!this.isLoading){e.next=2;break}return e.abrupt("return");case 2:return this.setLoadingProgress(0,0,0),this.setLoading(!0),e.prev=4,e.next=7,this.chatStore.load();case 7:return e.next=10,this.rootStore.Airgram.api.getChatHistory({chatId:this.chatId,limit:100,fromMessageId:this.startMessage});case 10:if("error"!==(t=e.sent).response._){e.next=13;break}throw t.response;case 13:if(0!==(r=t.response).totalCount){e.next=17;break}return this.canLoad=!1,e.abrupt("break",28);case 17:n=r.messages[r.messages.length-1],this.startMessage=n.id,s=Array.from(r.messages.reduce((function(e,t){return"messageSticker"!==t.content._||e.has(t.content.sticker.setId)||u.stickerIds.has(t.content.sticker.setId)||e.set(t.content.sticker.setId,t),e}),new Map).values()).filter((function(e){return!u.messageIds.has(e.id)})),i=Object(tt.a)(s);try{for(i.s();!(a=i.n()).done;)c=a.value,o=c.content,this.messageIds.set(c.id,!0),this.stickerIds.set(o.sticker.setId,!0),this.insertMessage(c)}catch(d){i.e(d)}finally{i.f()}if(this.setLoadingProgress(this.processed+r.totalCount,this.total+r.totalCount,this.batch+1),this.save(),!s.length){e.next=26;break}return e.abrupt("return",s.length);case 26:e.next=7;break;case 28:return e.prev=28,this.save(),this.setLoading(!1),e.finish(28);case 32:case"end":return e.stop()}}),e,this,[[4,,28,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=this.messages,t=this.messageIds,r=this.stickerIds,n=this.startMessage,s=this.canLoad;st.set(this.chatId,{messages:e,messageIds:t,stickerIds:r,startMessage:n,canLoad:s})}}]),e}(),at=r(69),ct=r.n(at),ot=Object(c.a)((function(e){var t=e.store;return t.isLoading?Object(p.jsx)(o.g,{children:Object(p.jsxs)(o.k,{span:!0,type:"secondary",children:["Loading messages (",t.processed,"/",t.total," batch: ",t.batch,")"]})}):Object(p.jsx)(o.k,{span:!0,type:"secondary",children:"Scroll to start loading"})})),ut=new Map,dt=function(){function e(t,r){var n=this;if(Object(D.a)(this,e),this.rootStore=t,this.userId=r,this.isLoading=!1,this.user=void 0,this.handlers=(new X).add(Z.UPDATE.updateUser,(function(e,t){return e.update.user.id===n.userId&&(n.user=e.update.user),t()})).build(),ut.has(r)){var s=ut.get(r);this.user=s}Object(B.d)(this,{user:B.f.ref,handlers:!1}),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setUser",value:function(e){this.user=e}},{key:"dispose",value:function(){this.rootStore.events.removeListener(le.eventName,this.handlers)}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.user){e.next=2;break}return e.abrupt("return",this.user);case 2:return e.next=4,this.rootStore.Airgram.api.getUser({userId:this.userId});case 4:if("error"!==(t=e.sent).response._){e.next=7;break}throw t.response;case 7:return this.setUser(t.response),ut.set(this.userId,t.response),e.abrupt("return",this.user);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();var ht=function(){function e(t,r){Object(D.a)(this,e),this.rootStore=t,this.senderId=r,this.userStore=void 0,this.chatStore=void 0,"messageSenderUser"===r._&&(this.userStore=new dt(t,r.userId)),"messageSenderChat"===r._&&(this.chatStore=new nt(t,r.chatId)),Object(B.d)(this)}return Object(F.a)(e,[{key:"dispose",value:function(){var e,t;null===(e=this.userStore)||void 0===e||e.dispose(),null===(t=this.chatStore)||void 0===t||t.dispose()}},{key:"user",get:function(){var e;return null===(e=this.userStore)||void 0===e?void 0:e.user}},{key:"chat",get:function(){var e;return null===(e=this.chatStore)||void 0===e?void 0:e.chat}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("messageSenderUser"!==this.senderId._){e.next=2;break}return e.abrupt("return",null===(t=this.userStore)||void 0===t?void 0:t.load());case 2:if("messageSenderChat"!==this.senderId._){e.next=4;break}return e.abrupt("return",null===(r=this.chatStore)||void 0===r?void 0:r.load());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();var lt=r(48),bt=r.n(lt),jt=["message"],ft=Object(c.a)((function(e){var t,r,n,s,c,d,l=e.message,b=Object(h.a)(e,jt),j=l.content.sticker,f=function(e){var t=Object(a.useState)((function(){return new ht(Le,e)})),r=Object(x.a)(t,1)[0];return Object(a.useEffect)((function(){return r.load(),function(){r.dispose()}}),[]),r}(l.senderId),v=fe(null!==(t=null===(r=f.user)||void 0===r||null===(n=r.profilePhoto)||void 0===n?void 0:n.small)&&void 0!==t?t:null===(s=f.chat)||void 0===s||null===(c=s.photo)||void 0===c?void 0:c.small,"base64",{priority:32});return Object(a.useEffect)((function(){f.load()}),[f]),Object(p.jsx)("div",Object(u.a)(Object(u.a)({className:bt.a.root},b),{},{children:Object(p.jsxs)(o.d.Container,{direction:"column",children:[Object(p.jsx)(o.d,{children:Object(p.jsx)(De,{src:v,name:f.user?f.user.firstName+" "+f.user.lastName:null===(d=f.chat)||void 0===d?void 0:d.title,children:new Date(1e3*l.date).toLocaleString()})}),Object(p.jsx)(o.d,{className:bt.a.container,alignItems:"flex-start",children:Object(p.jsx)(i.b,{to:"/set/".concat(j.setId),children:Object(p.jsx)(_e,{sticker:j})})})]})}))})),pt=1e3,vt=new Map,Ot=Object(c.a)((function(e){var t,r=e.match.params.id,n=parseInt(r),s=Object(a.useContext)(Re),i=s.Chats,c=Object(a.useState)((function(){return new it(s,n)})),u=Object(x.a)(c,1)[0],d=u.chatStore.chat,h=u.messages,l=fe(null===d||void 0===d||null===(t=d.photo)||void 0===t?void 0:t.small,"base64"),b=Object(a.useRef)(),j=h.length;u.canLoad&&j++;var f=Object(a.useCallback)((function(e){return u.canLoad&&0===e?pt:420}),[u.canLoad]),v=Object(et.a)({size:j,parentRef:b,estimateSize:f}),m=v.virtualItems,g=v.totalSize,k=v.scrollToOffset,w=Object(a.useCallback)((function(e){if(b.current&&e){var t=420*e;b.current.scrollTop+=t,k(b.current.scrollTop)}}),[k]);Object(a.useEffect)((function(){var e;vt.has(n)?k(null!==(e=vt.get(n))&&void 0!==e?e:0):w(u.messages.length)}),[]),Object(a.useEffect)((function(){return i.chats.has(n)&&Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.init();case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})))(),function(){u.dispose()}}),[i.chats,n,w,u]);var y=Object(a.useCallback)(Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.current&&b.current.scrollTop<800)){e.next=5;break}return e.next=3,u.load();case 3:t=e.sent,w(t);case 5:case"end":return e.stop()}}),e)}))),[w,u]);Object(a.useEffect)((function(){u.canLoad||(b.current.scrollTop-=pt)}),[u.canLoad]),Object(a.useEffect)((function(){y()}),[y,h.length]);var S=Object(a.useCallback)((function(e){y();var t=e.target;vt.set(n,t.scrollTop)}),[n,y]),I=Object(o.m)("sm",{match:"down"});return!r&&I?Object(p.jsx)(E.a,{to:"/chats"}):r?Object(p.jsxs)(o.d.Container,{direction:"column",justify:"flex-start",alignItems:"stretch",children:[Object(p.jsxs)(Pe,{children:[Object(p.jsx)(P,{}),Object(p.jsx)(o.d,{xs:!0,children:Object(p.jsx)(De,{src:l,name:null===d||void 0===d?void 0:d.title})})]}),Object(p.jsx)(o.d.Container,{className:ct.a.root,direction:"column",justify:"flex-start",children:Object(p.jsx)(L,{ref:b,onScroll:S,children:Object(p.jsx)("div",{style:A(g),children:m.map((function(e){var t=e.index,r=e.start,n=e.size,s=t;u.canLoad&&s--;var i=T(n,r);if(s<0)return Object(p.jsx)(o.d.Container,{gap:0,alignItems:"flex-end",style:i,children:Object(p.jsx)(o.d,{xs:!0,justify:"center",padding:"50px",children:Object(p.jsx)(ot,{store:u})})},t);var a=h[s];return Object(p.jsx)(ft,{style:i,message:a},a.id)}))})})})]}):Object(p.jsx)(O,{children:Object(p.jsx)(o.k,{type:"secondary",children:"Please choose a conversation "})})})),xt=r(70),mt=r.n(xt),gt=Object(c.a)((function(){var e,t,r=Object(a.useContext)(Re).Authorization,n=fe(null===(e=r.user)||void 0===e||null===(t=e.profilePhoto)||void 0===t?void 0:t.small,"base64",{priority:32});return Object(a.useEffect)((function(){r.getMe()}),[]),r.user?Object(p.jsxs)(o.d.Container,{wrap:"nowrap",alignItems:"center",xs:!0,children:[Object(p.jsx)(i.b,{className:mt.a.user,to:"/stickers",children:Object(p.jsx)(De,{src:n,name:"My stickers",children:r.user.username})}),Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:Object(p.jsx)(R.c,{}),onClick:function(){return r.logOut()}})]}):Object(p.jsx)(o.j,{})})),kt=r(39),wt=r.n(kt),yt=["chat","className"],St=function(e){var t,r,n,s,a=e.chat,c=e.className,d=Object(h.a)(e,yt),l=fe(null===(t=a.info)||void 0===t||null===(r=t.photo)||void 0===r?void 0:r.small,"base64");return Object(p.jsx)(i.b,Object(u.a)(Object(u.a)({to:"/conversation/".concat(null===(n=a.info)||void 0===n?void 0:n.id),className:b()(wt.a.chat,c),activeClassName:wt.a.active_chat},d),{},{children:Object(p.jsx)(o.d.Container,{className:wt.a.container,alignItems:"center",height:"100%",width:"100%",children:Object(p.jsx)(De,{src:l,name:null===(s=a.info)||void 0===s?void 0:s.title})})}))},It=Object(a.memo)(St),Ct=r(71),_t=r.n(Ct),At=0,Tt=Object(c.a)((function(){var e=Object(a.useContext)(Re).Chats,t=e.chatsList,r=Object(a.useRef)(),n=Object(et.a)({size:t.length,parentRef:r,estimateSize:Object(a.useCallback)((function(){return 64}),[])});Object(a.useEffect)((function(){n.scrollToOffset(At)}),[]);var s=Object(a.useCallback)((function(e){var t=e.target;At=t.scrollTop}),[]);return Object(p.jsx)(o.d.Container,{className:_t.a.root,direction:"column",justify:"flex-start",children:Object(p.jsx)(L,{ref:r,onScroll:s,children:Object(p.jsx)("div",{style:{height:"".concat(n.totalSize,"px"),width:"100%",position:"relative"},children:n.virtualItems.map((function(e){var r,n,s=e.index,i=e.size,a=e.start,c=t[s];return Object(p.jsx)(It,{chat:c,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(i,"px"),transform:"translateY(".concat(a,"px)")}},null!==(r=null===(n=c.info)||void 0===n?void 0:n.id)&&void 0!==r?r:s)}))})})})})),Nt=Object(c.a)((function(){return Object(p.jsxs)(o.d.Container,{direction:"column",justify:"flex-start",alignItems:"stretch",children:[Object(p.jsx)(Pe,{children:Object(p.jsx)(gt,{})}),Object(p.jsx)(Tt,{})]})})),Lt=r(40),Rt=r.n(Lt),Et=new Map,Pt=function(){function e(t,r,n){var s=this;if(Object(D.a)(this,e),this.rootStore=t,this.setId=r,this.toasts=n,this.set=void 0,this.handlers=(new X).add(Z.UPDATE.updateStickerSet,(function(e,t){return e.update.stickerSet.id===s.setId&&s.setSet(e.update.stickerSet),t()})).build(),Et.has(this.setId)){var i=Et.get(this.setId);this.setSet(i)}Object(B.d)(this,{set:B.f.ref}),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setSet",value:function(e){this.set=e,Et.set(this.setId,this.set)}},{key:"dispose",value:function(){Le.events.removeListener(le.eventName,this.handlers)}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.set){e.next=2;break}return e.abrupt("return",this.set);case 2:return e.prev=2,e.next=5,this.rootStore.Airgram.api.getStickerSet({setId:this.setId});case 5:if("error"!==(t=e.sent).response._){e.next=8;break}throw t.response;case 8:this.setSet(t.response);case 9:return e.prev=9,e.finish(9);case 11:case"end":return e.stop()}}),e,this,[[2,,9,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"install",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r,n,s=this;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)(this.toasts,2),r=t[1],e.prev=1,e.next=4,this.rootStore.Airgram.api.changeStickerSet({setId:this.setId,isInstalled:!0,isArchived:!1});case 4:if("error"!==(n=e.sent).response._){e.next=7;break}throw n.response;case 7:r({actions:[{name:"Uninstall",handler:function(e,t){t(),Le.Airgram.api.changeStickerSet({setId:s.setId,isArchived:!0})}}],text:"Sticker set has been installed"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r({type:"error",text:"Error installing sticker set"});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r,n,s=this;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)(this.toasts,2),r=t[1],e.prev=1,e.next=4,this.rootStore.Airgram.api.changeStickerSet({setId:this.setId,isArchived:!0});case 4:if("error"!==(n=e.sent).response._){e.next=7;break}throw n.response;case 7:r({actions:[{name:"Restore",handler:function(e,t){t(),Le.Airgram.api.changeStickerSet({setId:s.setId,isInstalled:!0,isArchived:!1})}}],text:"Sticker set has been deleted"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r({type:"error",text:"Error deleting sticker set"});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function zt(e){var t=Object(o.o)(),r=Object(a.useState)((function(){return new Pt(Le,e,t)})),n=Object(x.a)(r,1)[0];return Object(a.useEffect)((function(){return n.load(),function(){n.dispose()}}),[]),n}var Mt=r(72),Ut=r.n(Mt),Dt=r(27),Ft=Object(c.a)((function(e){var t=e.store,r=t.set;return Object(p.jsxs)(p.Fragment,{children:[(!(null!==r&&void 0!==r&&r.isInstalled)||r.isArchived)&&Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:Object(p.jsx)(Dt.a,{}),onClick:function(){return t.install()}}),(null===r||void 0===r?void 0:r.isInstalled)&&!r.isArchived&&Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:Object(p.jsx)(Dt.b,{}),onClick:function(){return t.delete()}})]})})),Ht=Object(c.a)((function(e){var t=zt(e.match.params.id),r=t.set;return Object(a.useEffect)((function(){t.load()}),[]),Object(p.jsxs)(o.d.Container,{direction:"column",justify:"flex-start",alignItems:"stretch",children:[Object(p.jsxs)(Pe,{children:[Object(p.jsx)(P,{}),Object(p.jsx)(o.d,{children:Object(p.jsx)(De,{name:null===r||void 0===r?void 0:r.title})}),Object(p.jsx)(o.d,{xs:!0,justify:"flex-end",children:Object(p.jsx)(Ft,{store:t})})]}),Object(p.jsx)(L,{className:Ut.a.root,children:Object(p.jsx)(o.d.Container,{justify:"flex-start",children:null===r||void 0===r?void 0:r.stickers.map((function(e){return Object(p.jsx)(o.d,{xs:24,sm:12,md:12,lg:8,xl:6,justify:"center",children:Object(p.jsx)(_e,{sticker:e})},e.sticker.id)}))})})]})})),Wt=r(41),Zt=function(){function e(t){var r=this;Object(D.a)(this,e),this.rootStore=t,this.isLoading=!1,this.isReordering=!1,this.sets=void 0,this.handlers=(new X).add(Z.UPDATE.updateInstalledStickerSets,(function(e,t){return r.load(!0),t()})).build(),Object(B.d)(this,{sets:B.f.shallow}),t.events.addListener(le.eventName,this.handlers)}return Object(F.a)(e,[{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setReordering",value:function(e){this.isReordering=e}},{key:"reorderSets",value:function(){var e=Object(U.a)(W.a.mark((function e(t){var r,n,s,i,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sets){e.next=2;break}return e.abrupt("return");case 2:if(r=t.source,n=t.destination){e.next=5;break}return e.abrupt("return");case 5:if(s=this.sets[r.index],r.index!==n.index){e.next=8;break}return e.abrupt("return");case 8:return this.sets.splice(r.index,1),this.sets.splice(n.index,0,s),i=this.sets.map((function(e){return e.id})),e.prev=11,e.next=14,this.rootStore.Airgram.api.reorderInstalledStickerSets({stickerSetIds:i});case 14:if("error"!==(a=e.sent).response._){e.next=17;break}throw a.response;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),this.sets.splice(n.index,0,s),this.sets.splice(r.index,1);case 23:case"end":return e.stop()}}),e,this,[[11,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setStickers",value:function(e){this.sets=e}},{key:"dispose",value:function(){this.rootStore.events.removeListener(le.eventName,this.handlers)}},{key:"load",value:function(){var e=Object(U.a)(W.a.mark((function e(){var t,r,n=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.length>0&&void 0!==n[0]&&n[0])||!this.isLoading){e.next=3;break}return e.abrupt("return");case 3:if(t||!this.sets){e.next=5;break}return e.abrupt("return",this.sets);case 5:return this.setLoading(!0),e.prev=6,e.next=9,this.rootStore.Airgram.api.getInstalledStickerSets();case 9:if("error"!==(r=e.sent).response._){e.next=12;break}throw r.response;case 12:return this.setStickers(r.response.sets),e.abrupt("return",r.response.sets);case 14:return e.prev=14,this.setLoading(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[6,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleReordering",value:function(){this.setReordering(!this.isReordering)}}]),e}();var Bt=r(36),Vt=r.n(Bt),qt=r(49),Jt=r.n(qt),Qt=Object(c.a)((function(e){var t,r=e.hideToolbar,n=void 0!==r&&r,s=e.hideControls,c=void 0!==s&&s,u=e.hideList,d=void 0!==u&&u,h=e.setInfo,l=zt(h.id);Object(a.useEffect)((function(){l.load()}),[l]);var b=l.set,j=Object(a.useRef)(),f=Object(a.useCallback)((function(){return Ie+12}),[]),v=Object(et.a)({horizontal:!0,size:null!==(t=null===b||void 0===b?void 0:b.stickers.length)&&void 0!==t?t:0,parentRef:j,estimateSize:f}),O=v.virtualItems,x=v.totalSize;return Object(p.jsxs)(o.d.Container,{className:Jt.a.root,direction:"column",justify:"flex-start",alignItems:"stretch",children:[!n&&Object(p.jsxs)(Pe,{children:[Object(p.jsx)(Ne,{set:b,height:26,width:26}),Object(p.jsx)(o.i,{w:.5}),Object(p.jsx)(o.k,{small:!0,b:!0,children:null===b||void 0===b?void 0:b.title}),!c&&Object(p.jsxs)(o.d,{xs:!0,justify:"flex-end",children:[Object(p.jsx)(i.b,{to:"/set/".concat(h.id),children:Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:Object(p.jsx)(Dt.c,{})})}),Object(p.jsx)(Ft,{store:l})]})]}),!d&&Object(p.jsx)(o.d,{className:Jt.a.list,children:Object(p.jsx)(L,{ref:j,children:Object(p.jsx)("div",{style:A(x,!0),children:O.map((function(e){var t=e.index,r=e.start,n=e.size,s=null===b||void 0===b?void 0:b.stickers[t];return Object(p.jsx)("div",{style:T(n,r,!0),children:Object(p.jsx)(_e,{sticker:s})},t)}))})})})]})})),Yt=function(e){var t=e.provided,r=e.store,n=e.index,s=e.set,i=e.size,a=e.start;return Object(p.jsxs)("div",Object(u.a)(Object(u.a)({ref:t.innerRef,className:Vt.a.setWrapper},t.draggableProps),{},{style:Object(u.a)(Object(u.a)({},T(i,null!==a&&void 0!==a?a:0)),t.draggableProps.style),children:[r.isReordering&&Object(p.jsx)("div",Object(u.a)(Object(u.a)({className:Vt.a.dragHandle},t.dragHandleProps),{},{children:Object(p.jsx)(Dt.d,{})})),Object(p.jsx)(Qt,{setInfo:s,hideList:r.isReordering,hideControls:r.isReordering})]}),n)},Gt=Object(c.a)((function(){var e,t,r=function(){var e=Object(a.useState)((function(){return new Zt(Le)})),t=Object(x.a)(e,1)[0];return Object(a.useEffect)((function(){return t.load(),function(){t.dispose()}}),[]),t}();Object(a.useEffect)((function(){r.load()}),[]);var n=Object(a.useRef)(),s=Object(a.useMemo)((function(){return 64+(r.isReordering?0:Ie)}),[r.isReordering]),i=Object(a.useCallback)((function(){return s}),[s]),c=Object(et.a)({size:null!==(e=null===(t=r.sets)||void 0===t?void 0:t.length)&&void 0!==e?e:0,parentRef:n,estimateSize:i}),u=c.virtualItems,d=c.totalSize;return Object(p.jsxs)(o.d.Container,{direction:"column",justify:"flex-start",alignItems:"stretch",children:[Object(p.jsxs)(Pe,{children:[Object(p.jsx)(P,{}),Object(p.jsx)(o.d,{xs:!0,children:Object(p.jsx)(o.k,{children:"Stickers"})}),Object(p.jsx)(o.d,{children:Object(p.jsx)(o.a,{auto:!0,type:r.isReordering?"secondary":"abort",iconRight:Object(p.jsx)(Dt.e,{}),onClick:function(){return r.toggleReordering()}})})]}),Object(p.jsx)(o.d.Container,{className:Vt.a.root,direction:"column",justify:"flex-start",children:Object(p.jsx)(Wt.a,{onDragEnd:function(e){return r.reorderSets(e)},children:Object(p.jsx)(Wt.c,{isDropDisabled:!r.isReordering,droppableId:"sets",mode:"virtual",renderClone:function(e,t,n){return Object(p.jsx)(Yt,{provided:e,store:r,set:r.sets[n.source.index],index:n.source.index,size:s})},children:function(e){return Object(p.jsx)(L,{ref:function(t){t instanceof HTMLElement&&($(n,t),$(e.innerRef,t))},children:Object(p.jsx)("div",{style:A(d),children:u.map((function(e){var t,n=e.index,i=e.start,a=null===(t=r.sets)||void 0===t?void 0:t[n];return Object(p.jsx)(Wt.b,{isDragDisabled:!r.isReordering,draggableId:a.id,index:n,children:function(e){return Object(p.jsx)(Yt,{provided:e,store:r,index:n,set:a,start:i,size:s})}},a.id)}))})})}})})})]})})),Kt=[{path:"/chats",component:Nt},{path:"/stickers",component:Gt},{path:"/conversation/:id?",render:function(e){return Object(p.jsx)(Ot,Object(u.a)({},e),e.match.params.id)}},{path:"/set/:id?",render:function(e){return Object(p.jsx)(Ht,Object(u.a)({},e),e.match.params.id)}}];function Xt(e,t){return Object(p.jsx)(E.b,Object(u.a)({},e),t)}var $t={paddingTop:0,paddingBottom:0};function er(){var e=Object(o.m)("sm",{match:"down"}),t=Kt[0],r=Kt.slice(1);return Object(p.jsx)(o.d.Container,{gap:2,margin:0,width:"100%",height:"100%",children:e?Object(p.jsx)(o.d,Object(u.a)(Object(u.a)({},$t),{},{className:Rt.a.panel,xs:24,children:Object(p.jsxs)(E.d,{children:[[t].concat(Object($e.a)(r)).map(Xt),Object(p.jsx)(E.a,{to:"chats"})]})})):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(o.d,Object(u.a)(Object(u.a)({},$t),{},{className:Rt.a.panel,sm:8,md:6,lg:4,xl:2,children:Object(p.jsx)(Nt,{})})),Object(p.jsx)(o.d,Object(u.a)(Object(u.a)({},$t),{},{className:Rt.a.panel,sm:16,md:18,lg:20,xl:22,children:Object(p.jsxs)(E.d,{children:[r.map(Xt),Object(p.jsx)(E.a,{to:"conversation"})]})}))]})})}var tr=function(){var e=Object(a.useContext)(Re).Theme,t="dark"===e.currentTheme;return Object(p.jsxs)(o.d.Container,{wrap:"nowrap",gap:0,height:"50px",alignItems:"center",children:[Object(p.jsx)(o.i,{w:.5}),Object(p.jsx)(o.a,{auto:!0,type:"abort",iconRight:t?Object(p.jsx)(R.d,{}):Object(p.jsx)(R.e,{}),onClick:function(){return e.toggleTheme()}}),Object(p.jsx)("div",{style:{flex:1}}),Object(p.jsxs)(o.k,{span:!0,children:["Made with"," ",Object(p.jsx)(o.f,{underline:!0,href:"https://airgram.netlify.app/",target:"_blank",rel:"noopener noreferrer",children:"Airgram"}),","," ",Object(p.jsx)(o.f,{underline:!0,href:"https://react.geist-ui.dev/",target:"_blank",rel:"noopener noreferrer",children:"Geist UI"})," ","and ",Object(p.jsx)(R.b,{color:"red"})]}),Object(p.jsx)(o.i,{})]})};var rr=Object(c.a)((function(){var e=Object(a.useContext)(Re),t=e.Theme,r=e.Chats;return Object(a.useEffect)((function(){r.load()}),[]),Object(p.jsxs)(o.c,{themeType:t.currentTheme,children:[Object(p.jsx)(g,{}),Object(p.jsx)(o.b,{}),Object(p.jsxs)(o.h,{render:"effect-seo",scale:.5,width:"100%",padding:0,children:[Object(p.jsx)(o.h.Content,{paddingTop:0,children:Object(p.jsx)(Xe,{children:Object(p.jsx)(er,{})})}),Object(p.jsx)(o.h.Footer,{children:Object(p.jsx)(tr,{})})]})]})})),nr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,1279)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),i(e),a(e)}))};s.a.render(Object(p.jsx)(Ee,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(rr,{})})}),document.getElementById("root")),nr()},36:function(e,t,r){e.exports={root:"Stickers_root__3yWzd",setWrapper:"Stickers_setWrapper__fAs7y",dragHandle:"Stickers_dragHandle__186iY"}},37:function(e,t,r){e.exports={root:"Sticker_root__gZJDN",sticker:"Sticker_sticker__27Rjf"}},39:function(e,t,r){e.exports={chat:"ChatRow_chat__IbOPK",active_chat:"ChatRow_active_chat__2ZRAR"}},40:function(e,t,r){e.exports={panel:"Root_panel__2Hl4e"}},46:function(e,t,r){e.exports={root:"CenterLayout_root__L4_bA",padding:"CenterLayout_padding__3SYoM"}},48:function(e,t,r){e.exports={container:"Message_container__L0WXx"}},49:function(e,t,r){e.exports={root:"InlineSet_root__1p_bX",list:"InlineSet_list__wg14G"}},60:function(e,t,r){e.exports={thumb:"List_thumb__2th6t"}},66:function(e,t,r){e.exports={card:"UserCard_card__3-Fjo"}},68:function(e,t,r){e.exports={codeArea:"QrCode_codeArea__1c03P"}},69:function(e,t,r){e.exports={root:"Conversation_root__1cN7I"}},70:function(e,t,r){e.exports={user:"User_user__V0drn"}},71:function(e,t,r){e.exports={root:"Chats_root__31lV_"}},72:function(e,t,r){e.exports={root:"Set_root__1thkL"}},78:function(e,t,r){}},[[1278,1,2]]]);
//# sourceMappingURL=main.8478f170.chunk.js.map